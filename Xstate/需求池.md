虚拟仿真护理教学项目.
1.N个步骤(每个步骤都有状态,未开始(未激活),进行中(待交互),完成,失败),且每个步骤下可能有n个子步骤(一个场景).
步骤状态：
未激活.
待交互.
进行中.
- "当前动作: 例子：点击输液泵,点击预制按钮,点击滴数,离开输液泵"
完成.
失败.
2.步骤无序且能跳转到任意步骤.
4.Threejs搭建的仿真虚拟训练.
5.不同步骤下操作不同物品(模型,拿取药品,放置药品,点击特点物品触发对应模型动画).
6.当前步骤物品操作完成后,进入下一步骤.
7.进入某一步骤后,可操作物体高亮提示.
8.xstate管理状态.
9.可获取当前所在步骤.
10.步骤为有状态状态机,物品为无状态状态机.
11.物品行为，视角变化，动画调用如何解耦合.
12.物品的行为(拾取，选中，放置，高亮)
13.物品状态行为是否需要管理（ESC模式）
14.threejs 虚拟仿真项目如何控制行为呐？比如点击某个物品需要先把镜头移动过去，播放动画（异步操作），然后动画播放（异步操作）完成后，点击指定按钮。
获取动作执行结果。（整个流程执行成功了还是失败了）
15.一个行为动作要点击不同物品，UI,该如何来管理。
要管理一个行为动作中涉及的多个点击事件（包括点击不同物品和 UI 元素），建议使用一个统一的 事件管理系统 和
行为控制架构。这种方式不仅能处理复杂交互逻辑，还能保证代码的可扩展性和可维护性。
17.有两个维度,一个步骤,一个物品,步骤决定物品的行为(有异步行为).物品行为决定步骤的状态.
  1.采用THREEJS构建场景.
  2.场景中有N个步骤(每个步骤都有状态,未开始,进行中,完成,失败).
    - 一个步骤有M个行为.
    - 当行为完成后,进入下一个行为.
    - 当前步骤下的行为都完成时,该步骤完成.
    - 当前步骤完成后会进入下一个步骤.
    - 一个行为中有I个动作(主要是点击与THREEJS场景交互,比如点击场景中的"物体A",这时物体A被拾取,再次点击物体B,物体A被放置在物体B之上,其中可能还会触发镜头,模型动画与确认按钮操作).
      3.有J个物体,只有在对应的行为下才能操作对应的物体,且不同行为下,物品点击后触发的操作有可能不同.
      4.两个维度,一个步骤,一个物品,步骤决定物品的行为(有异步行为).物品行为决定步骤的状态.
      5.模型动画与镜头动画,某些动作会触发模型动画与镜头动画,两者可能是同步运行也可能依次运行.
    - 点击操作(可能是模型也可能是UI),镜头动画,模型动画,三者在一个行为中可能同时存在,且出现次数,顺序依赖关系中的顺序不一定.
      6.某些动作会触发UI元素,按钮点击等,需要等待按钮被点击之后才可以触发下一步动作.
18.历史记录功能.
    - 采用动作队列的方式记录用户操作历史,并支持撤销和重做操作.
19.xstate的应用.
    - 步骤有状态,当前运行到了哪一步.
    - 行为有状态.
    - 动作无状态.
20.架构最小元单位为动作,行为有多个动作组成,每步骤由多个行为组成.
21.如果有一个描述表现的对象，是不是可以把对应步骤的物品。该步骤最后的位置跟最后的动画算出来然后执行.
22.我更倾向于将该项目描述成交互电影.
23.r3f 中加载了 多个外部 glb 如何，方便管理这些glb,比如根据业务播放帧动画，或者修改他们的位置.
24.历史记录相关 设计模式，命令模式，备忘录模式。
整个项目的流程控制与行为管理,该如何来做?
// 补充内容.
项目名称: 虚拟仿真护理教学项目
项目描述:
1.采用THREEJS构建场景.
2.场景中有N个步骤(每个步骤都有状态,未开始,进行中,完成,失败).
- 一个步骤有M个行为.
- 当行为完成后,进入下一个行为.
- 当前步骤下的行为都完成时,该步骤完成.
- 当前步骤完成后会进入下一个步骤.
- 一个行为中有I个动作(主要是点击与THREEJS场景交互,比如点击场景中的"物体A",这时物体A被拾取,再次点击物体B,物体A被放置在物体B之上,其中可能还会触发镜头,模型动画与确认按钮操作).
  3.有J个物体,只有在对应的行为下才能操作对应的物体,且不同行为下,物品点击后触发的操作有可能不同.
  4.两个维度,一个步骤,一个物品,步骤决定物品的行为(有异步行为).物品行为决定步骤的状态.
  5.模型动画与镜头动画,某些动作会触发模型动画与镜头动画,两者可能是同步运行也可能依次运行.
- 点击操作(可能是模型也可能是UI),镜头动画,模型动画,三者在一个行为中可能同时存在,且出现次数,顺序依赖关系中的顺序不一定.
  6.某些动作会触发UI元素,按钮点击等,需要等待按钮被点击之后才可以触发下一步动作.

项目难度:
1.项目解耦
整个项目的流程控制与行为管理,该如何来做.

总结(虚拟仿真实训项目)：
  项目交互,流程控制.以事件为核心(模型动画,物品变换,镜头动画状态依赖于事件的变化).
  xstate做步骤管理(且管理上下文,管理步骤).
  事件订阅-发布 与 事件队列,管理事件,以及整个操作/交互流程.
  zustand管理全局状态(操作模型句柄(用于控制模型动画,模型位置)).
  r3f提供3D视图,提供交互组件与入口.
  命令模式 提供 历史操作记录,还原指定步骤场景,还原对应步骤事件队列功能.

